<style>
    .item .label{
        float: right;
        margin-top: 0.5rem
    }
    .panel_wrapper{
        display: inline;
    }

    .table_task{
        width:100%;
    }
    .table_task td{
        vertical-align: top;
    }
    .table_task tr:hover{
        cursor: pointer;
    }
    .td_right{
        text-align: right;
    }

    .tr_task_completed{
        background-color: #d0e9c6 !important;
    }

    .tr_task_completed h4{
        text-decoration:line-through;
    }
</style>

<div ng-repeat="group in groups | orderBy:'index'"  class="panel_wrapper col-sm-12 col-md-6 col-lg-4">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">{{ group.groupname }} <span class="badge">{{ group.tasks.length }}</span></h3>
        </div>

                <table class="table table-hover table_task">
                    <colgroup>
                        <col width="1%">
                        <col width="99%">
                    </colgroup>
                    <tbody>
                    <tr ng-repeat="task in group.tasks | orderBy:'completed'" ng-class="{'tr_task_completed':task.completed}">
                        <td style="padding-top: 18px">
                            <input id="{{ task.id }}" type="checkbox" name="task_check" ng-model="task.completed" onclick="alert('123');">
                        </td>
                        <td>
                            <h4  ng-init="icheck_init()">{{ task.title }}</h4>
                            <span class="label">{{ task.tasker_main }}</span>
                            <span class="label" ng-class="{'label-primary':task.urgency=='正常','label-warning':task.urgency=='紧急','label-danger':task.urgency=='火急'}">{{ task.urgency }}</span>
                            <span class="label">{{ task.ddl | date:'MM-dd' }}</span>
                            <span class="label"><span class="glyphicon glyphicon-thumbs-up"></span> {{ task.upvoters.length }}</span>
                        </td>
                    </tr>
                    </tbody>








                    <tbody style="display: none;" ng-repeat="task in tasks">
                    <tr>
                        <td class="td_left">
                            <!--标题-->
                            <h4 class="list-group-item-heading">{{ task.title }}</h4>
                            <!--备注-->
                            <p ng-if="task.remark!=''">{{ task.remark }}</p>
                            <p>负责：<span class="label">{{ task.tasker_main }}</span>&nbsp;&nbsp;<span ng-repeat="tasker in task.tasker_other">{{ tasker }}&nbsp;&nbsp;</span></p>
                            <p>参加：<span ng-repeat="participator in task.participators">{{ participator }}&nbsp;&nbsp;</span></p>
                            <p>发布：{{ task.publisher }}</p>
                            <p>支持：<span ng-if="task.upvoters.length==0">还没有人支持呢...</span><span ng-repeat="upvoter in task.upvoters">{{ upvoter }}&nbsp;&nbsp;</span></p>
                        </td>
                        <td class="td_right">
                            <span class="label" ng-class="{'label-primary':task.urgency=='正常','label-warning':task.urgency=='紧急','label-danger':task.urgency=='火急'}">{{ task.urgency }}</span>
                            <span class="label">{{ task.ddl | date:'MM-dd' }}</span>
                            <br>
                            <h1>{{ task.base_score*(1+0.1*task.upvoters.length) }}</h1>
                            <p>{{ task.base_score }}×{{ 1+0.1*task.upvoters.length }}</p>
                        </td>
                    </tr>
                    <tr><td colspan="2">
                        <button class="btn btn-raised btn-default">支持</button>
                        <button class="btn btn-raised btn-default">修改</button>
                        <button class="btn btn-raised btn-default">完成</button>
                    </td></tr>
                    <tr class="tr_hr"><td colspan="2"><hr></td></tr>
                    </tbody>
                </table>

    </div>
</div>


<!--TODO 涟漪动画效果无法显示-->